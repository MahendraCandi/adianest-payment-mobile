<!DOCTYPE html>
<html>

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no'>
    <link rel='stylesheet' type='text/css' media='screen' href='static/bootstrap/css/bootstrap.css'>
    <link rel="stylesheet" href="static/bootstrap/css/open-iconic-bootstrap.css">
    <link rel='stylesheet' type='text/css' media='screen' href='static/style.css'>
    <title>Main Menu</title>
</head>

<body>
    <div id="loadView" class="d-flex flex-column min-vh-100">
    </div>

    <!-- modal splash screen. fade bd-example-modal-sm -->
    <div id="loadingModal" class="modal" tabindex="-1" role="dialog" aria-labelledby="mySmallModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-sm modal-dialog-centered">
            <div class="modal-content w-50 m-auto">
                <div class="modal-body m-auto d-flex flex-column">
                    <div class="spinner-border text-primary mx-auto" role="status">
                        <span class="sr-only">Loading...</span>
                    </div>
                    <div class="mt-1">
                        Loading...
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script src="static/jquery-3.5.1.min.js"></script>
    <script src='static/bootstrap/js/bootstrap.js'></script>
    <script src="config/config-properties.js"></script>
    <script src="parameter/global-parameter.js"></script>
    <script src="parameter/page-parameter.js"></script>
    <script src="cordova.js"></script>
    <script src="static/sweetalert2.all.min.js"></script>
    <script src='app-js/main-menu.js'></script>
    <script src='app-js/top-up.js'></script>
    <script src='app-js/top-up-confirm.js'></script>
    <script src='app-js/paket-internet.js'></script>
    <script src='app-js/paket-internet-confirm.js'></script>


    <script>
        // check platform is mobil app or browser
        if (navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/)) {
            document.addEventListener("deviceready", onDeviceReady, false);
        } else {
            $(document).ready(function () {
                onDeviceReady();
            });
        }

        function onDeviceReady() {

            // check credential
            if (GLOBAL_PARAM.getToken() === null) {
                GLOBAL_PARAM.clearPage();
                window.location.href = "login.html";
            }

            changePage();
        }

        function showLoading() {
            $('#loadingModal').modal({
                keyboard: false,
                backdrop: 'static',
                show: true
            });
        }

        function changePage() {
            var currentPage = GLOBAL_PARAM.getLastPage();

            // showLoading();
            if (currentPage === PAGE.MAIN_MENU) {
                // hit user credential
                mainMenu.loadView();
            } else if (currentPage === PAGE.TOP_UP) {
                topUpPage.loadView();
                // topUpPage.getData();
            } else if (currentPage === PAGE.TOP_UP_CONFIRM) {
                topUpConfirmPage.loadView();
            } else if (currentPage === PAGE.PAKET_INTERNET) {
                internet.loadView();
            } else if (currentPage === PAGE.PAKET_INTERNET_CONFIRM) {
                internetConf.loadView();
            }
        }
    </script>
</body>

</html>